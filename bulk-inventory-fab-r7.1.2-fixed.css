/**
 * bulk-inventory-fab-r7.1.2-FIXED.css
 * 
 * FIXED:
 * + Thêm styles cho toast notification (thay loading dialog)
 * 
 * Version: r7.1.2-FIXED
 * Date: 2025.12.15
 */

/* ========================================================================
   FLOATING ACTION BUTTON (FAB)
   ======================================================================== */

.bulk-fab {
    position: fixed;
    z-index: 9999;
    width: 64px;
    height: 64px;
    cursor: grab;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    -webkit-tap-highlight-color: transparent;
    touch-action: none;
}

.bulk-fab.hidden {
    opacity: 0;
    pointer-events: none;
    transform: scale(0.5);
}

.bulk-fab:active {
    cursor: grabbing;
}

/* FAB Button */
.bulk-fab-button {
    position: relative;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 50%;
    box-shadow: 
        0 4px 12px rgba(102, 126, 234, 0.4),
        0 8px 24px rgba(118, 75, 162, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.bulk-fab-button:active {
    transform: scale(0.92);
    box-shadow: 
        0 2px 8px rgba(102, 126, 234, 0.3),
        0 4px 16px rgba(118, 75, 162, 0.2);
}

/* FAB Icon */
.bulk-fab-icon {
    font-size: 28px;
    line-height: 1;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

/* Badge (số lượng đã chọn) */
.bulk-fab-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 24px;
    height: 24px;
    padding: 0 6px;
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
    color: white;
    font-size: 12px;
    font-weight: 700;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(238, 90, 82, 0.5);
    border: 2px solid white;
    animation: badge-pulse 2s ease-in-out infinite;
}

.bulk-fab-badge.hidden {
    display: none;
}

@keyframes badge-pulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 2px 8px rgba(238, 90, 82, 0.5);
    }
    50% {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(238, 90, 82, 0.7);
    }
}

/* ========================================================================
   POPUP OVERLAY
   ======================================================================== */

.bulk-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    z-index: 9998;
    transition: opacity 0.3s ease;
}

.bulk-popup-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}

/* ========================================================================
   POPUP MENU
   ======================================================================== */

.bulk-popup {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(0);
    width: calc(100% - 32px);
    max-width: 420px;
    background: white;
    border-radius: 24px;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.12),
        0 16px 64px rgba(0, 0, 0, 0.16);
    z-index: 9999;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.bulk-popup.hidden {
    opacity: 0;
    pointer-events: none;
    transform: translateX(-50%) translateY(100px);
}

/* Header */
.bulk-popup-header {
    position: relative;
    padding: 20px 24px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.bulk-popup-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    line-height: 1.4;
}

.bulk-popup-close {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 32px;
    height: 32px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 24px;
    line-height: 1;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.bulk-popup-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

.bulk-popup-close:active {
    transform: rotate(90deg) scale(0.9);
}

/* Body */
.bulk-popup-body {
    padding: 24px;
}

/* Selection Count Display */
.bulk-selection-count {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 16px;
    padding: 16px 20px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
}

.count-label {
    font-size: 14px;
    color: #6c757d;
    font-weight: 500;
}

.count-value {
    font-size: 28px;
    font-weight: 700;
    color: #667eea;
    min-width: 48px;
    text-align: center;
    animation: count-update 0.3s ease;
}

@keyframes count-update {
    0% {
        transform: scale(1.2);
        opacity: 0.5;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.count-unit {
    font-size: 13px;
    color: #6c757d;
    font-weight: 400;
}

/* ========================================================================
   ACTION BUTTONS
   ======================================================================== */

.bulk-popup-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.bulk-action-btn {
    position: relative;
    width: 100%;
    padding: 16px 20px;
    border: none;
    border-radius: 14px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 12px;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    overflow: hidden;
}

.bulk-action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.3);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.bulk-action-btn:active::before {
    opacity: 1;
}

.bulk-action-btn:active {
    transform: scale(0.97);
}

/* Button Icon */
.btn-icon {
    font-size: 22px;
    line-height: 1;
    flex-shrink: 0;
}

/* Button Text */
.btn-text {
    flex: 1;
    text-align: left;
    line-height: 1.3;
}

/* Button Hint */
.btn-hint {
    font-size: 11px;
    opacity: 0.7;
    font-weight: 400;
}

/* ========================================================================
   BUTTON VARIANTS
   ======================================================================== */

/* Chọn tất cả (Xanh lá) */
.btn-select-all {
    background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
    color: white;
}

.btn-select-all:hover {
    box-shadow: 0 4px 12px rgba(55, 178, 77, 0.3);
}

/* Hủy chọn (Xám) */
.btn-clear {
    background: linear-gradient(135deg, #adb5bd 0%, #868e96 100%);
    color: white;
}

.btn-clear:hover {
    box-shadow: 0 4px 12px rgba(134, 142, 150, 0.3);
}

/* Xác nhận (Xanh dương) */
.btn-confirm {
    background: linear-gradient(135deg, #339af0 0%, #1c7ed6 100%);
    color: white;
    font-size: 16px;
    padding: 18px 20px;
}

.btn-confirm:hover {
    box-shadow: 0 4px 12px rgba(28, 126, 214, 0.4);
}

/* Thoát (Đỏ) */
.btn-exit {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
    color: white;
}

.btn-exit:hover {
    box-shadow: 0 4px 12px rgba(238, 90, 82, 0.3);
}

/* ========================================================================
   ✅ NEW: TOAST NOTIFICATION (THAY LOADING DIALOG)
   ======================================================================== */

.bulk-toast-container {
    position: fixed;
    bottom: 80px; /* Phía trên FAB */
    left: 50%;
    transform: translateX(-50%);
    z-index: 10000;
    width: calc(100% - 32px);
    max-width: 420px;
    pointer-events: none;
}

.bulk-toast {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 20px;
    background: white;
    border-radius: 16px;
    box-shadow: 
        0 4px 16px rgba(0, 0, 0, 0.12),
        0 8px 32px rgba(0, 0, 0, 0.16);
    margin-bottom: 12px;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    pointer-events: auto;
}

.bulk-toast.show {
    opacity: 1;
    transform: translateY(0);
}

/* Toast Icon */
.toast-icon {
    font-size: 24px;
    line-height: 1;
    flex-shrink: 0;
    animation: icon-spin 1s linear infinite;
}

/* Stop animation nếu không phải loading */
.bulk-toast-success .toast-icon,
.bulk-toast-error .toast-icon,
.bulk-toast-warning .toast-icon {
    animation: none;
}

@keyframes icon-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Toast Message */
.toast-message {
    flex: 1;
    font-size: 15px;
    font-weight: 500;
    line-height: 1.4;
    color: #212529;
}

/* Toast Types */
.bulk-toast-success {
    border-left: 4px solid #51cf66;
}

.bulk-toast-error {
    border-left: 4px solid #ff6b6b;
}

.bulk-toast-warning {
    border-left: 4px solid #ffd43b;
}

.bulk-toast-info {
    border-left: 4px solid #339af0;
}

/* ========================================================================
   RESPONSIVE
   ======================================================================== */

@media (max-width: 480px) {
    .bulk-popup {
        width: calc(100% - 24px);
        bottom: 16px;
    }

    .bulk-popup-header h3 {
        font-size: 15px;
    }

    .bulk-action-btn {
        padding: 14px 18px;
        font-size: 14px;
    }

    .btn-icon {
        font-size: 20px;
    }

    .count-value {
        font-size: 24px;
    }
    
    .bulk-toast-container {
        bottom: 70px;
        width: calc(100% - 24px);
    }
    
    .bulk-toast {
        padding: 14px 18px;
    }
}

/* Tablet & Desktop */
@media (min-width: 768px) {
    .bulk-fab {
        width: 72px;
        height: 72px;
    }

    .bulk-fab-icon {
        font-size: 32px;
    }

    .bulk-popup {
        bottom: 40px;
        max-width: 480px;
    }

    .bulk-action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    }
    
    .bulk-toast-container {
        bottom: 100px;
        max-width: 480px;
    }
}

/* ========================================================================
   ANIMATIONS
   ======================================================================== */

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(100px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Show animations */
.bulk-popup:not(.hidden) {
    animation: slideInUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.bulk-popup-overlay:not(.hidden) {
    animation: fadeIn 0.3s ease;
}

/* ========================================================================
   ACCESSIBILITY
   ======================================================================== */

.bulk-action-btn:focus-visible {
    outline: 3px solid rgba(102, 126, 234, 0.5);
    outline-offset: 2px;
}

.bulk-popup-close:focus-visible {
    outline: 2px solid rgba(255, 255, 255, 0.8);
    outline-offset: 2px;
}

/* Reduce motion for users who prefer */
@media (prefers-reduced-motion: reduce) {
    .bulk-fab,
    .bulk-popup,
    .bulk-popup-overlay,
    .bulk-action-btn,
    .bulk-popup-close,
    .bulk-toast {
        transition: none;
        animation: none;
    }
    
    .toast-icon {
        animation: none !important;
    }
}

/* ========================================================================
   PRINT (Ẩn khi in)
   ======================================================================== */

@media print {
    .bulk-fab,
    .bulk-popup,
    .bulk-popup-overlay,
    .bulk-toast-container {
        display: none !important;
    }
}
